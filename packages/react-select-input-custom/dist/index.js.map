{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["ï»¿import chroma from 'chroma-js';\nimport * as React from 'react';\nimport Select from 'react-select';\n\ninterface IOption {\n  label?: string;\n  name?: string;\n  value?: string;\n}\n\ninterface Props {\n  activeElement: any;\n  id?: string;\n  error?: boolean;\n  className?: string;\n  classes?: any;\n  disabled?: boolean;\n  elements: string[];\n  inputDataChangeHandler?: (option: any) => void;\n  label?: object;\n  name: string;\n  readOnly?: boolean;\n  fontColor?: string;\n  isMulti?: boolean;\n  closeMenuOnSelect?: boolean;\n  onInputChange?: (option: any) => void;\n  isClearable?: boolean;\n}\n\nconst ReactSelectInputCustom: React.FunctionComponent<Props> = (props: Props) => {\n  const [customInputValue, setCustomInputValue] = React.useState(null);\n  let activeElement: any = {};\n  let isSimplefilter: boolean = true;\n  const options = props.elements.map((element) => {\n    if (typeof element === 'object') {\n      isSimplefilter = false;\n      const arrElementMapped = Object.entries(element).map((subElement) => ({\n        label: subElement[1],\n        value: subElement[0],\n      }));\n      if (arrElementMapped && arrElementMapped.length > 0) {\n        const elementMapped: any = arrElementMapped[0];\n        return { label: elementMapped.label, value: elementMapped.value, name: props.name };\n      }\n    }\n    return { label: element, value: element, name: props.name };\n  });\n\n  if (props?.activeElement?.length && typeof props.activeElement === 'object' && props?.activeElement?.length > 0) {\n    isSimplefilter = false;\n  }\n  if (isSimplefilter) {\n    if (props.isMulti) {\n      activeElement = [{ label: props.activeElement, value: props.activeElement, name: props.name }];\n    } else {\n      activeElement = { label: props.activeElement, value: props.activeElement, name: props.name };\n    }\n  } else if (typeof props.activeElement === 'object') {\n    activeElement = options.filter((option: IOption) =>\n      props.activeElement.find((activeElement: string) => activeElement === option.value)\n    );\n  } else {\n    const arrActiveElement: any = options.filter((option: IOption) => option.value === props.activeElement);\n    if (arrActiveElement && arrActiveElement.length > 0) {\n      activeElement = arrActiveElement[0];\n    }\n  }\n\n  const dataColor: any = props.fontColor;\n  const dot = (color = '#ccc') => ({\n    alignItems: 'center',\n    display: 'flex',\n\n    ':before': {\n      backgroundColor: color,\n      borderRadius: 10,\n      content: '\" \"',\n      display: 'block',\n      marginRight: 8,\n      height: 10,\n      width: 10,\n    },\n  });\n\n  const calculateColor = (isDisabled: boolean, isSelected: boolean, color: string) =>\n    isDisabled ? '#ccc' : isSelected ? (chroma.contrast(color, 'white') > 2 ? 'white' : 'black') : dataColor;\n  const colourStyles = {\n    control: (styles: any) => ({ ...styles, minHeight: '35px', backgroundColor: 'white' }),\n    option: (\n      styles: any,\n      {\n        isDisabled,\n        isFocused,\n        isSelected,\n      }: { isDisabled: boolean, isFocused: boolean, isSelected: boolean }\n    ) => {\n      const color: any = chroma(dataColor);\n      return {\n        ...styles,\n        backgroundColor: isDisabled ? null : isSelected ? dataColor : isFocused ? color.alpha(0.1).css() : null,\n        color: calculateColor(isDisabled, isSelected, color),\n        cursor: isDisabled ? 'not-allowed' : 'default',\n      };\n    },\n    input: (styles: any) => ({ ...styles, height: '20px', ...dot() }),\n    placeholder: (styles: any) => ({ ...styles, ...dot() }),\n    singleValue: (styles: any,) => ({\n      ...styles,\n      ...dot(\n        (props.activeElement && props.activeElement.length && props.activeElement.length > 0) || props.activeElement\n          ? dataColor\n          : 'red'\n      ),\n    }),\n  };\n\n  const selectChangeHandler = (data: any) => {\n    let dataValues;\n    if (data) {\n      if (data.length) {\n        if (data.length > 0) {\n          dataValues = {\n            name: props.name,\n            value: data && data.length && data.map((dataElement: any) => dataElement.value),\n          };\n        } else {\n          dataValues = {\n            name: props.name,\n            value: [],\n          };\n        }\n      } else {\n        dataValues = { name: props.name, value: data.value };\n      }\n    } else {\n      dataValues = props.isMulti ? { name: props.name, value: [] } : { name: props.name, value: null };\n    }\n    // @ts-ignore\n    props.inputDataChangeHandler(dataValues);\n  };\n\n  const onInputChange = (element: any) => {\n    // @ts-ignore\n    setCustomInputValue({ label: `${element} (new)`, name: props.name, value: element });\n  };\n\n  // @ts-ignore\n  const optionsParsed = customInputValue?.value > '' ? [...options, customInputValue] : options;\n\n  return (\n    <React.Fragment>\n      <Select\n        id={props.id}\n        className={props.className}\n        dafaultValue={activeElement}\n        value={activeElement}\n        options={optionsParsed}\n        onChange={selectChangeHandler}\n        onInputChange={onInputChange}\n        styles={colourStyles}\n        isDisabled={props.disabled}\n        isClearable={props.isClearable}\n        isMulti={props.isMulti}\n        closeMenuOnSelect={props.closeMenuOnSelect}\n      />\n    </React.Fragment>\n  );\n};\n\nReactSelectInputCustom.defaultProps = {\n  activeElement: '',\n  closeMenuOnSelect: true,\n  disabled: false,\n  elements: [],\n  error: false,\n  inputDataChangeHandler: () => {},\n  name: '',\n  readOnly: false,\n  fontColor: '#666666',\n  isMulti: false,\n  isClearable: true,\n};\n\nexport default ReactSelectInputCustom;\n"],"names":["React.useState","chroma","React.createElement","React.Fragment","Select"],"mappings":"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"}